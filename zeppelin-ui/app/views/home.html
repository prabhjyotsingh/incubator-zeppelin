<!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<div class="section" ng-init="init()">
  <div class="container home-container">

    <div class="well well-sm">

      <form class="navbar-form search-box" role="search">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search" name="q">

          <div class="input-group-btn">
            <button class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-search"></i></button>
          </div>
        </div>
      </form>
      <div class="action-buttons pull-right">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addNewModal">Add New</button>
        <button type="button" class="btn btn-danger" ng-show="deleteEnabled">Delete</button>
      </div>
    </div>

    <div id="addNewModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Add new Data source</h4>
          </div>
          <div class="modal-body">
            <ul id="datasourceTabs" class="nav nav-tabs" role="tablist" ng-click="switchTab($event)">
              <li class="active"><a href="#csvTab" role="tab" data-toggle="tab">CSV</a></li>
              <li><a href="#sparkTab" id="spark-tab" role="tab" data-toggle="tab">Spark</a></li>
              <!--li><a href="#hdfsTab" id="hdfs-tab" role="tab" data-toggle="tab">HDFS</a></li-->
            </ul>

            <div class="tab-content">
              <div role="tabpanel" class="tab-pane active" aria-labelledby="csv-tab" id="csvTab">
                <wizard on-finished="importData()" hide-indicators="true">
                  <!--Step 1-->
                  <wz-step canexit="csvFetchComplete" ng-init="initUploadURL()">
                    <div class="form-group">
                      <label class="control-label" for="csvUrlInput">URL</label>
                      <input class="form-control" id="csvUrlInput" ng-model="model.csvUrlInput" placeholder="http://"/>
                    </div>
                    <div class="text-right">
                      <span class="continueSpinner fa fa-refresh fa-spin hidden"></span>
                      <button type="submit" class="btnContinue btn btn-primary" wz-next="uploadUrl()" value="Continue">
                        Continue
                      </button>
                    </div>
                  </wz-step>
                  <!--Step 1 End-->

                  <!--Step 2-->
                  <wz-step canenter="detectDelimiter(csvString)" >
                    <div>Select: <a href="">all</a> <a href="">none</a></div>
                    <div class="csv-preview">
                      <table class="table table-condensed" ng-show="csvList.length > 1">
                        <thead>
                        <tr>
                          <th></th>
                          <th>Field</th>
                          <th>Type</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="csv in csvList = (csvString|formatCsv:csvDelimiter:textQualifier)">
                          <td></td>
                          <td>
                            <div class="csv-delimiter">
                              <input id="{{csv}}" type="checkbox" value="{{csv}}" checked="checked"/>
                              <label for="{{csv}}">{{csv}}</label>
                            </div>
                          </td>
                          <td>
                            <select>
                              <option value="String">String</option>
                              <option value="Integer">Integer</option>
                            </select>
                          </td>
                        </tr>
                        </tbody>
                      </table>
                      <code ng-show="csvList.length <= 1">
                        {{csvString}}
                      </code>
                    </div>

                    <div class="form-group">
                      <div class="csv-delimiter-info" ng-init="initTooltips()">
                        <mark>Autodetected delimiter <em>{{detectedCsvDelimiter}}</em></mark>
                        <i class="fa fa-info-circle" data-toggle="tooltip" data-placement="top"
                           title="Lorem ipsum dolor sit amet, consectetur adipiscing elit..."></i>
                      </div>
                      <div class="radio radio-inline csv-delimiter">
                        <input ng-model="csvDelimiter" type="radio" value="\t" id="tabId"/>
                        <label for="tabId">Tab</label>
                      </div>
                      <div class="radio radio-inline csv-delimiter">
                        <input ng-model="csvDelimiter" value=";" id="SemicolonId" type="radio"/>
                        <label for="SemicolonId">Semicolon</label>
                      </div>
                      <div class="radio radio-inline csv-delimiter">
                        <input ng-model="csvDelimiter" value="," id="CommaId" type="radio"/>
                        <label for="CommaId">Comma</label>
                      </div>
                    </div>
                    <div class="form-group form-inline csv-options">
                      <div class="text text-inline csv-delimiter other">
                        <label>Other</label>
                        <input ng-model="csvDelimiter" type="text"/>
                      </div>

                      <label for="textQualifier">Text qualifier</label>
                      <select class="form-control" id="textQualifier" ng-model="textQualifier">
                        <option>"</option>
                        <option>'</option>
                        <option>none</option>
                      </select>
                    </div>

                    <div class="form-group form-inline import-as">

                      <label for="importAsId">Import As</label>
                      <input id="importAsId" ng-model="model.importAs">
                    </div>

                    <div class="text-right">
                      <input type="submit" class="btn btn-default" wz-previous="initUploadURL()" value="Back"/>
                      <span class="continueSpinner fa fa-refresh fa-spin hidden"></span>
                      <input type="submit" class="btn btn-primary" wz-next="importData()" value="Add"/>
                    </div>
                  </wz-step>
                  <!--Step 2 ends-->
                </wizard>
              </div>

              <div role="tabpanel" class="tab-pane" aria-labelledBy="hdfs-tab" id="hdfsTab">
                <div class="form-group">
                  <label class="control-label" for="hdfsInput">HDFS URL</label>
                  <input class="form-control" id="hdfsInput" placeholder="" type="text"/>
                </div>
              </div>

              <div role="tabpanel" class="tab-pane" aria-labelledBy="spark-tab" id="sparkTab">
                <div class="form-group">
                  <label class="control-label" for="sparkInput">Spark URL</label>
                  <input class="form-control" id="sparkInput" placeholder="" type="text"/>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="">
      <div class="datasource-tile img-rounded img-thumbnail box-shadow--2dp" ng-repeat="tableName in filteredTables"
           ng-class="{'active' : datasourceSelect[tableName].selected}">
        <div class="properties">
          <h4 class="text-primary text-uppercase">{{tableName}}</h4>

          <p>
            <div ng-repeat="details in tableDetails[tableName]">
              - {{details.rowName}} {{details.rowType}}
            </div>
            <!--This can have table descriptions-->
          </p>
        </div>
        <div class="actions">
          <ul class="list-inline text-info" ng-init="initTooltips()">
            <li>
              <div class="checkbox">&nbsp;</div>
            </li>
            <li>
              <div class="checkbox right">
                <input id="datasourceSelect{{$index}}" type="checkbox" ng-model="datasourceSelect[tableName].selected"/>
                <label for="datasourceSelect{{$index}}">Select</label>
              </div>
            </li>
          </ul>
        </div>
        <span class="fa fa-check-circle selected-circle" ng-show="datasourceSelect[tableName].selected"></span>
      </div>
    </div>
  </div>
</div>

<div class="section">
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-right">
        <pagination
          ng-model="currentPage"
          total-items="tablename.length"
          max-size="maxSize"
          boundary-links="true">
        </pagination>
      </div>
    </div>
  </div>
</div>
